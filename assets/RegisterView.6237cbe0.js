import{d as M,r as s,c as N,a as t,w as o,b as A,o as z,V as n,e as p,f as E,g as $,h as i,t as B,u as P,s as y,i as S,_ as j}from"./index.f99a5bfa.js";import{V as D,a as F}from"./VSnackbar.b6f27fb5.js";const I={class:"d-flex align-center justify-center h-screen mx-5"},T=i("Register"),L={class:"d-flex justify-center"},O=i("Already have an account ?"),Z=i("Login"),G=i(" Close "),H=M({__name:"RegisterView",setup(J){const k=P(),v=s(null),u=s(!1),r=s(!1),C=async()=>{v.value=null,u.value=!0,r.value=!1;try{const{user:e,error:l}=await y.auth.signUp({email:w.value,password:m.value});if(l)throw l;const{error:c}=await y.from("Users").insert([{user_id:e==null?void 0:e.id,userName:_.value,name:V.value}]);if(c)throw c;k.push({name:"home"})}catch(e){v.value=e.message,r.value=!0}u.value=!1},f=s(!0),V=s(""),x=[e=>!!e||"Name is required"],_=s(""),R=[e=>!!e||"Username is required",e=>e.length>=5||"Min 5 characters",e=>/^[a-z0-9_-]+$/.test(e)||"Only lowercase letters, 0-9 and _"],w=s(""),U=[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],d=s(!1),m=s(""),q=[e=>!!e||"Password is required",e=>/[A-Z]/.test(e)||"At least one uppercase letter",e=>/[a-z]/.test(e)||"At least one lowercase letter",e=>/[0-9]/.test(e)||"At least one digit",e=>/[#?!@$%^&*-]/.test(e)||"At least one special symbol #?!@$%^&*-",e=>e.length>=8||"Min 8 characters"],b=s(""),h=[e=>e===m.value||"Passwords must match",e=>!!e||"Password confirmation is required"];return(e,l)=>{const c=S("router-link");return z(),N("div",I,[t(D,{onSubmit:A(C,["prevent"]),modelValue:f.value,"onUpdate:modelValue":l[8]||(l[8]=a=>f.value=a),"lazy-validation":""},{default:o(()=>[t(n,{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=a=>V.value=a),modelModifiers:{trim:!0},rules:x,label:"Name","prepend-icon":"mdi-account",required:"",clearable:"",variant:"outlined"},null,8,["modelValue"]),t(n,{modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=a=>_.value=a),modelModifiers:{trim:!0},rules:R,label:"Username","prepend-icon":"mdi-account-outline",required:"",clearable:"",variant:"outlined"},null,8,["modelValue"]),t(n,{modelValue:w.value,"onUpdate:modelValue":l[2]||(l[2]=a=>w.value=a),modelModifiers:{trim:!0},rules:U,label:"E-mail","prepend-icon":"mdi-email",required:"",clearable:"",variant:"outlined"},null,8,["modelValue"]),t(n,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=a=>m.value=a),modelModifiers:{trim:!0},type:d.value?"text":"password","append-icon":d.value?"mdi-eye":"mdi-eye-off","onClick:append":l[4]||(l[4]=a=>d.value=!d.value),rules:q,variant:"outlined",label:"Password",hint:"At least 8 characters","prepend-icon":"mdi-lock",counter:"",required:"",clearable:""},null,8,["modelValue","type","append-icon"]),t(n,{modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=a=>b.value=a),rules:h,type:"password",label:"Confirm password","prepend-icon":"mdi-lock-reset",required:"",clearable:"",variant:"outlined"},null,8,["modelValue"]),t(p,{type:"submit",disabled:!f.value||u.value,loading:u.value,color:"success",class:"w-100 mb-5",size:"large"},{default:o(()=>[T]),_:1},8,["disabled","loading"]),t(c,{to:{name:"login"},custom:""},{default:o(({href:a,navigate:g})=>[E("div",L,[t(p,{href:a,onClick:g,color:"blue",variant:"text",size:"small"},{default:o(()=>[O]),_:2},1032,["href","onClick"]),t(p,{href:a,onClick:g,color:"blue",variant:"outlined",size:"small"},{default:o(()=>[Z]),_:2},1032,["href","onClick"]),$(e.$slots,"default",{},void 0,!0)])]),_:3}),t(F,{modelValue:r.value,"onUpdate:modelValue":l[7]||(l[7]=a=>r.value=a),color:"error"},{actions:o(()=>[t(p,{variant:"text",onClick:l[6]||(l[6]=a=>r.value=!1)},{default:o(()=>[G]),_:1})]),default:o(()=>[i(B(v.value)+" ",1)]),_:1},8,["modelValue"])]),_:3},8,["onSubmit","modelValue"])])}}});const W=j(H,[["__scopeId","data-v-c5caa208"]]);export{W as default};
